# Claude Code Project Rules

## Automatic Documentation System

### File Updates
This project uses three automatically maintained documentation files:

1. **CONTEXT.md** - Comprehensive project context for new chats
2. **PROJECT_LOG.md** - Detailed log of actions and decisions
3. **TODO.md** - Active, prioritized to-do list

### Update Rules

#### CONTEXT.md Updates
Update whenever there's a significant change to:
- Project understanding or architecture
- Tech stack or key dependencies
- File structure or organization
- Important design decisions
- Current phase or status

Must always include:
- Project name and primary purpose (1-2 sentences)
- Current project status and phase
- Tech stack and key dependencies
- File structure overview
- Key architecture decisions and rationale
- How the project works (important context)
- Quirks, gotchas, or important notes
- Recent significant changes or progress
- Current priorities and next steps
- Blockers or issues

Keep concise but complete - readable in 2-3 minutes.

#### PROJECT_LOG.md Updates
Update after completing any meaningful task. Track:
- Date and time of significant actions
- What was implemented or changed
- Why decisions were made
- Problems encountered and solutions
- Test results and validations

**Never delete entries - only append.**

#### TODO.md Updates
Update after every conversation turn where tasks are:
- Discussed
- Completed
- Added
- Blocked

Maintain sections:
- High priority tasks (at top)
- In-progress items (with status)
- Blocked items (with reason)
- Done section (with completion dates)

Each item should include brief context about why it matters.

**Move completed items to "Done" section rather than deleting.**

### End of Session Protocol
At the end of each conversation session, ask if a comprehensive update of all three files is needed.

### File Locations
- `/Users/nikolashulewsky/snfalyze-local/systemscheck/CONTEXT.md`
- `/Users/nikolashulewsky/snfalyze-local/systemscheck/PROJECT_LOG.md`
- `/Users/nikolashulewsky/snfalyze-local/systemscheck/TODO.md`

## Project-Specific Rules

### Audit Criteria Source of Truth
The Excel file at `/Users/nikolashulewsky/Desktop/2025 Clinical Systems Review Template 9-21-25.xlsx` is the source of truth for all audit criteria. When auditing systems, always compare against this file and match exactly.

### Database Changes
When adding new database columns:
1. Update the Sequelize model in `backend/src/models/`
2. Update associations in `backend/src/models/index.js`
3. Update API routes to include new fields
4. Either run seed script (drops all data) or manually run ALTER TABLE SQL

### Frontend Section Headers
Section definitions for scorecard systems are maintained in:
- `backend/src/data/auditCriteria.js` (source data)
- `frontend/src/pages/scorecards/components/SystemTab.jsx` (UI rendering)

When adding sections to a new system, update both files.

## Survey Intelligence
Before working on Survey Intelligence, Team/Company/Market Views:
- Read `18_Survey_Intelligence_Architecture.md`
- Follow established patterns for risk scores, recommendations, context
- Ensure views link to each other properly
